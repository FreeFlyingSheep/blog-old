---
title: "体系结构相关知识"
date: 2020-10-21
lastmod: 2020-10-21
tags: [Linux 内核, 内核开发]
categories: [Kernel]
draft: false
---

[Linux 内核学习笔记系列](/posts/kernel/kernel)，内核开发部分，简单介绍 Linux 内核体系结构和可移植性相关的内容。

<!--more-->

## 体系结构相关的源码目录

为了便于扩展到新的体系结构，内核严格隔离了与体系结构相关和无关的代码。

在较早的版本中，与体系结构 `T` 相关的 C 和汇编源码位于 `arch/T` 目录下，头文件则位于 `include/asm-T`。后来，体系结构相关的头文件挪到了 `arch/T/include/asm` 下。

本系列学习笔记主要基于 Linux 2.6.34 版本，且仅针对 x86 体系结构，所以对于体系结构相关的代码，我只关心 `arch/x86` 目录。

## 字长

字长是指机器一次能完成处理的数据。处理器的通用寄存器的大小应该和它的字长是一致的。

对于 x86 处理器，有 32 位 (i386) 和 64 位 (x86-64) 的版本，出于历史原因和某些主观的命名习惯，我们根据长度来划分数据，长度的单位是位 (bit)：

| 名称 | 长度 |
| :--- | :---: |
| 字节 (byte) | 8 |
| 字 (word) | 16 |
| 双字 (double words) | 32 |
| 四字 (quad words) | 64 |

在 Linux 中，一个字通常代表处理器的字长。对于 32 位的 i386，字长是 32 位 (4 字节)；对于 64 位的 x86-64，字长是 64 位 (8 字节)。

具体“字”的含义，要根据上下文来确定。

## 数据类型

C 标准并未明确指定数据类型的数据长度，在不同的平台下，这些数据类型的长度可能不同。

## 数据对齐

TODO
